


|**Название**|**Вес**|
| :- | :- |
|<p>Пользователи и группы[^1]</p>|1|

1.**Управление членами групп**

2.**Информация о пользователе**

  -Автоматическое обновление информации о пользователе

  -Обновление информации о пользователе вручную

3.**Длина сессии**

  Rancher полагается на пользователей и группы, чтобы определить, кому разрешено входить в Rancher и к каким ресурсам можно получить доступ. Когда вы настроите внешнего поставщика аутентификации, пользователи от этого поставщика смогут входить на ваш сервер Rancher. Когда пользователь входит в систему, поставщик аутентификации предоставит вашему серверу Rancher список групп, к которым принадлежит пользователь.

  Доступом к кластерам, проектам, многокластерным приложениям и глобальным поставщикам DNS и записям можно управлять с помощью добавления к этим ресурсам отдельных пользователей или групп. Когда вы добавляете группу к ресурсу, все пользователи, являющиеся в поставщике аутентификации членами этой группы, смогут получить доступ к этому ресурсу с разрешениями, указанными для группы. Дополнительные сведения о ролях и разрешениях см. в разделе ["Управление доступом на основе ролей" (Role Based Access Control, RBAC).](https://github.com/rancher/docs/blob/master/content/rancher/v2.6/en/admin-settings/authentication/user-groups/%7B%7B%3Cbaseurl%3E%7D%7D/rancher/v2.6/en/admin-settings/rbac)
  
# Управление членами групп
  При добавлении пользователя или группы к ресурсу вы можете выполнить поиск пользователей или групп, начав вводить их имя. Сервер Rancher отправит запрос поставщику аутентификации, чтобы найти пользователей и группы, соответствующие введенным вами данным. Поиск ограничен поставщиком аутентификации (authentication provider), с помощью которого вы в данный момент вошли в систему. Например, если вы включили аутентификацию с помощью GitHub, но вошли в систему с использованием [локальной учетной записи пользователя](https://github.com/rancher/docs/blob/master/content/rancher/v2.6/en/admin-settings/authentication/user-groups/%7B%7B%3Cbaseurl%3E%7D%7D/rancher/v2.6/en/admin-settings/authentication/local), вы не сможете выполнять поиск пользователей или групп GitHub.

  Можно просмотреть всех пользователей, независимо от того, являются ли они локальными пользователями или получены от поставщика аутентификации. Доступно также управление всеми пользователями. Для этого в левом верхнем углу нажмите **☰> Users & Authentication** (пользователи и аутентификация). На левой панели навигации нажмите **Users** (пользователи).

{{< saml\_caveats >}} 

# Информация о пользователе
  Rancher хранит информацию о каждом пользователе, который входит в систему через поставщика аутентификации (authentication provider). В том числе хранятся сведения о том, разрешен ли пользователю доступ к вашему серверу Rancher, и список групп, к которым принадлежит пользователь. Rancher хранит эту информацию о пользователе, чтобы CLI, API и kubectl могли точно отражать данные о доступе, который имеет пользователь, основываясь на его членстве в группе поставщика аутентификации.

  Всякий раз, когда пользователь входит в пользовательский интерфейс с помощью поставщика аутентификации, Rancher автоматически обновляет эту информацию о пользователе.
  
## Автоматическое обновление информации о пользователе
  Rancher будет периодически обновлять информацию о пользователе еще до того, как пользователь войдет в систему через пользовательский интерфейс. Вы можете контролировать, как часто Rancher выполняет это обновление.

  Этим поведением управляют два параметра:

- auth-user-info-max-age-seconds

Этот параметр определяет, насколько старой может быть информация о пользователе до того, как Rancher обновит ее. Если пользователь выполняет вызов API (либо напрямую, либо с помощью Rancher CLI или kubectl), и время, прошедшее с момента последнего обновления пользователя, превышает этот параметр, то Rancher запустит обновление. По умолчанию этот параметр равен 3600 секундам, т.е. 1 часу.

- auth-user-info-resync-cron

Этот параметр управляет повторяющимся расписанием повторной синхронизации информации о поставщике аутентификации для всех пользователей. Независимо от того, входил ли пользователь в систему или недавно использовал API, это приведет к обновлению пользователя через указанный интервал. Этот параметр по умолчанию равен 0 0 \* \* \*, то есть один раз в сутки, в полночь. Смотрите [документацию по Cron](https://en.wikipedia.org/wiki/Cron "https://en.wikipedia.org/wiki/Cron") для получения дополнительной информации о допустимых значениях для этого параметра.

  Чтобы изменить эти настройки,

1. В левом верхнем углу нажмите **☰> Global Settings** (глобальные настройки).
2. Перейдите к настройке, которую вы хотите изменить, и нажмите **⋮>Edit Setting**  (изменить настройку).

***Примечание:** Поскольку SAML не поддерживает просмотр (lookup) пользователей, поставщики аутентификации на основе SAML не поддерживают периодическое обновление информации о пользователе. Информация о пользователе будет обновляться только тогда, когда пользователь войдет в пользовательский интерфейс Rancher.*

## Обновление информации о пользователе вручную
  Если вы не уверены, как давно Rancher в последний раз выполнял автоматическое обновление информации о пользователе, вы можете выполнить ручное обновление всех пользователей.

1. В верхнем левом угле нажмите **☰> Users & Authentication** (пользователи и аутентификация).
2. На странице **Users** (пользователи) нажмите **Refresh Group Memberships** (обновить членство в группах).

**Результаты:** Rancher обновит пользовательскую информацию для всех пользователей. Будет обновлена информация о том, какие пользователи могут получить доступ к Rancher, а также о том, к каким группам, принадлежит каждый пользователь.

***Примечание:** Поскольку SAML не поддерживает просмотр (lookup) пользователей, поставщики аутентификации на основе SAML не поддерживают возможность обновления информации о пользователе в ручном режиме. Информация о пользователе будет обновляться только тогда, когда пользователь войдет в пользовательский интерфейс Rancher.*

# Длина сессии
Можно изменить и значение по умолчанию продолжительности (TTL) каждого сеанса пользователя. По умолчанию продолжительность сеанса составляет 16 часов.

1. В верхнем левом угле нажмите **☰> Global Settings** (глобальные настройки.).
2. Перейдите в раздел auth-user-session-ttl-minutes и нажмите **⋮>Edit Setting**  (изменить настройки).
3. Введите количество времени в минутах, которое должен длиться сеанс, и нажмите **Save** (сохранить).

**Результат:** Пользователи автоматически выходят из Rancher по истечении заданного количества минут.

[^1]:[Users and Groups](https://github.com/rancher/docs/blob/master/content/rancher/v2.6/en/admin-settings/authentication/user-groups/_index.md "https://github.com/rancher/docs/blob/master/content/rancher/v2.6/en/admin-settings/authentication/user-groups/_index.md")
